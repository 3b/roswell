language: common-lisp

os:
  - linux
  - osx

before_install:
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then brew update; fi
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then brew --env; fi
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then brew config; fi
install:
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then brew tap snmsts/roswell; fi

script:
  - find . \( -name \*.c -o -name \*.h \) -type f|xargs wc -l -c
  - find . \( -name \*.go \) -type f|xargs wc -l -c
  - find . \( -name \*.lisp -o -name \*.ros \) -type f|xargs wc -l -c
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then brew install roswell --verbose --HEAD; fi
  - if [ "$TRAVIS_OS_NAME" = "linux" ]; then sh bootstrap; fi
  - if [ "$TRAVIS_OS_NAME" = "linux" ]; then ./configure; fi
  - if [ "$TRAVIS_OS_NAME" = "linux" ]; then make -j4; fi
  - if [ "$TRAVIS_OS_NAME" = "linux" ]; then sudo make install; fi
  - ros version
  - ros -v setup
  - ros list
  - ros -v run -- --version
  - ros install sbcl
  - ros -v run -- --version
  - ros install ccl-bin
  - ros -v run -- --version
  - ros config
  - man -Pcat ros
